{% extends 'layout.html' %} {% block content %} {% set back_fallback =
url_for('category_detail', category_id=style.category_id) if style and
style.category_id else url_for('index') %}
<div class="d-flex align-items-center mb-3">
  <a
    class="btn btn-outline-secondary me-2"
    href="#"
    onclick="event.preventDefault(); if (history.length > 1) { history.back(); } else { window.location.href='{{ back_fallback }}'; }"
    aria-label="回上一頁"
    >←</a
  >
  <h1 class="h5 mb-0">款式：{{ style.name }}</h1>
  <a class="btn btn-outline-secondary ms-auto" href="{{ back_fallback }}"
    >回類別</a
  >
</div>

<div class="d-flex align-items-center mb-3">
  <h1 class="h4 mb-0">款式：{{ style.name }}</h1>
  <a
    class="btn btn-outline-secondary ms-auto"
    href="{{ url_for('category_detail', category_id=style.category_id) }}"
  >
    返回此類別
  </a>
</div>

{% if style.description %}
<p class="text-muted">{{ style.description }}</p>
{% endif %}

<div class="row g-3">
  {% for p in products %}
  <div class="col-12 col-sm-6 col-md-4 col-lg-3">
    <div class="card h-100">
      {% if p.image_filename %}
      <img
        src="{{ url_for('static', filename='uploads/' ~ p.image_filename) }}"
        class="card-img-top"
        alt="{{ p.name }}"
      />
      {% else %}
      <img
        src="https://via.placeholder.com/600x400?text=No+Image"
        class="card-img-top"
        alt="No Image"
      />
      {% endif %}

      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ p.name }}</h5>
        <p class="card-text text-muted mb-2">NT$ {{ p.price_display }}</p>
        <a
          class="btn btn-primary mt-auto"
          href="{{ url_for('product_detail', product_id=p.id) }}"
          >查看</a
        >
      </div>
    </div>
  </div>
  {% endfor %} {% if not products %}
  <div class="col-12">
    <div class="alert alert-info">此款式尚無商品。</div>
  </div>
  {% endif %}
</div>

{% endblock %}
