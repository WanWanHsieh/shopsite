{% extends 'layout.html' %}
{% block content %}
<div class="d-flex align-items-center mb-3">
  <h1 class="h4 mb-0">布料出清</h1>
  <a class="btn btn-outline-secondary ms-auto" href="{{ url_for('index') }}">返回首頁</a>
</div>
<div class="row g-3">
  {% for f in fabrics %}
  <div class="col-12 col-sm-6 col-md-4 col-lg-3">
    <div class="card h-100">
      {% if f.image_filename %}
        <img class="card-img-top" src="{{ url_for('static', filename='uploads/' ~ f.image_filename) }}" alt="{{ f.name }}">
      {% else %}
        <img class="card-img-top" src="https://via.placeholder.com/600x400?text=No+Image" alt="No Image">
      {% endif %}
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ f.name }}</h5>
        <ul class="list-unstyled small text-muted mb-2">
          {% if f.origin %}<li>產地：{{ f.origin }}</li>{% endif %}
          {% if f.size %}<li>尺寸：{{ f.size }}</li>{% endif %}
        </ul>
        {% if f.clearance_price_cents is not none %}
          <div class="mb-2">
            <span class="badge text-bg-danger">出清價</span>
            <span class="fs-5 text-danger ms-2">NT$ {{ f.clearance_price_display }}</span>
            <del class="text-muted ms-2">NT$ {{ f.price_display }}</del>
          </div>
        {% else %}
          <div class="mb-2"><span class="fs-5 text-danger">NT$ {{ f.price_display }}</span></div>
        {% endif %}
        <p class="text-secondary small">{{ f.description }}</p>
      </div>
    </div>
  </div>
  {% endfor %}
  {% if not fabrics %}
  <div class="col-12"><div class="alert alert-info">目前沒有出清布料。</div></div>
  {% endif %}
</div>
{% endblock %}