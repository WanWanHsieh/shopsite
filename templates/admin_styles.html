{% extends 'layout.html' %}{% block content %}<div class='d-flex align-items-center mb-3'><h1 class='h4 mb-0'>款式管理：{{ category.name }}</h1><a class='btn btn-outline-secondary ms-auto' href='{{ url_for('admin_categories') }}'>返回類別</a></div><div class='card mb-4'><div class='card-body'><h2 class='h6'>新增款式</h2><form method='post' enctype='multipart/form-data'><div class='row g-3'><div class='col-sm-4'><label class='form-label'>款式名稱</label><input type='text' name='name' class='form-control' placeholder='例如：圓型、花型、360度型' required></div><div class='col-sm-8'><label class='form-label'>描述（可選）</label><input type='text' name='description' class='form-control' placeholder='簡短描述'></div><div class='col-12'><label class='form-label'>封面圖片（可選）</label><input type='file' name='image' accept='image/*' class='form-control'></div><div class='col-12'><button class='btn btn-primary'>新增款式</button></div></div></form></div></div><h2 class='h6'>已建立款式</h2><div class='table-responsive'><table class='table align-middle'><thead><tr><th>ID</th><th>圖片</th><th>名稱</th><th>描述</th><th>操作</th></tr></thead><tbody>{% for s in styles %}<tr><td>{{ s.id }}</td><td style='width:100px'>{% if s.image_filename %}<img src='{{ url_for('static', filename='uploads/' ~ s.image_filename) }}' class='img-thumbnail'>{% else %}<img src='https://via.placeholder.com/120x90?text=No+Image' class='img-thumbnail'>{% endif %}</td><td>{{ s.name }}</td><td class='small text-muted'>{{ s.description }}</td><td class='text-nowrap'><button class='btn btn-sm btn-outline-primary' data-bs-toggle='collapse' data-bs-target='#edit{{ s.id }}'>編輯</button><form class='d-inline' method='post' action='{{ url_for('admin_style_delete', style_id=s.id) }}' onsubmit="return confirm('確定刪除？');"><button class='btn btn-sm btn-outline-danger'>刪除</button></form></td></tr><tr class='collapse' id='edit{{ s.id }}'><td colspan='5'><form method='post' action='{{ url_for('admin_style_edit', style_id=s.id) }}' enctype='multipart/form-data'><div class='row g-2 align-items-end'><div class='col-sm-4'><label class='form-label'>名稱</label><input type='text' name='name' class='form-control' value='{{ s.name }}'></div><div class='col-sm-6'><label class='form-label'>描述</label><input type='text' name='description' class='form-control' value='{{ s.description }}'></div><div class='col-sm-2'><label class='form-label'>更換圖片</label><input type='file' name='image' accept='image/*' class='form-control'></div><div class='col-12'><button class='btn btn-primary btn-sm'>儲存</button></div></div></form></td></tr>{% endfor %}{% if not styles %}<tr><td colspan='5' class='text-center text-muted'>尚無款式</td></tr>{% endif %}</tbody></table></div>{% endblock %}